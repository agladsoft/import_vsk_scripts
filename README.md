# üö¢ Import VSK Scripts

## üìù –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–î–∞–Ω–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–¥–µ—Ä–∂–∏—Ç –Ω–∞–±–æ—Ä —Å–∫—Ä–∏–ø—Ç–æ–≤ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –í–°–ö (–í–æ—Å—Ç–æ—á–Ω–∞—è —Å—Ç–∏–≤–∏–¥–æ—Ä–Ω–∞—è –∫–æ–º–ø–∞–Ω–∏—è). –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª –≤–∫–ª—é—á–∞–µ—Ç –≤ —Å–µ–±—è:

- üìä –ü–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–æ–≤ —Å –¥–∞–Ω–Ω—ã–º–∏ –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö –≥—Ä—É–∑–æ–ø–µ—Ä–µ–≤–æ–∑–æ–∫
- üîÑ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –∏ —É–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–µ—Ä–µ–≤–æ–∑–æ–∫
- üåç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–µ—Ä–µ–∑ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—ã
- üöõ –û–±–æ–≥–∞—â–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–µ–π –æ –ª–∏–Ω–∏—è—Ö –ø–µ—Ä–µ–≤–æ–∑–æ–∫
- üíæ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- üì¶ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å ClickHouse –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Å–ø—Ä–∞–≤–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
import_vsk_scripts/
‚îú‚îÄ‚îÄ Dockerfile                          # –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ requirements.txt                     # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ bash_dir/                           # Bash —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
‚îÇ   ‚îú‚îÄ‚îÄ run_import_vsk.sh              # –ì–ª–∞–≤–Ω—ã–π —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–π —Å–∫—Ä–∏–ø—Ç
‚îÇ   ‚îî‚îÄ‚îÄ flat_import_vsk.sh             # –û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Ñ–∞–π–ª–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ VSK
‚îî‚îÄ‚îÄ scripts/                           # Python –º–æ–¥—É–ª–∏
    ‚îú‚îÄ‚îÄ flat_import_vsk.py             # –û—Å–Ω–æ–≤–Ω–æ–π –ø–∞—Ä—Å–µ—Ä –¥–∞–Ω–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–∞
    ‚îî‚îÄ‚îÄ parsed.py                      # –ú–æ–¥—É–ª—å –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ø–æ—Ä—Ç–∞–º–∏
```

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### üêç Python –º–æ–¥—É–ª–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- **flat_import_vsk.py** - –æ—Å–Ω–æ–≤–Ω–æ–π –º–æ–¥—É–ª—å –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ Excel —Ñ–∞–π–ª–æ–≤ —Å –∏–º–ø–æ—Ä—Ç–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
- **parsed.py** - –º–æ–¥—É–ª—å –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤ –∏ –æ–±–æ–≥–∞—â–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –ª–∏–Ω–∏—è–º–∏

### üîß Bash —Å–∫—Ä–∏–ø—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏
- **run_import_vsk.sh** - –±–µ—Å–∫–æ–Ω–µ—á–Ω—ã–π —Ü–∏–∫–ª –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ —Ñ–∞–π–ª–æ–≤
- **flat_import_vsk.sh** - –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫–∞—Ö flat_import_vsk_tracking –∏ flat_import_vsk_tracking_update

## üöÄ –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å

### üö¢ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö VSK
1. **üìÑ –ü–∞—Ä—Å–∏–Ω–≥ Excel —Ñ–∞–π–ª–æ–≤** - –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∏–∑ —Ñ–∞–π–ª–æ–≤ –∏–º–ø–æ—Ä—Ç–∞ VSK
2. **üîÑ –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**:
   - üìÖ –ö–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏—è –¥–∞—Ç –æ—Ç–≥—Ä—É–∑–∫–∏ –≤ —Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç
   - üî¢ –ü—Ä–∏–≤–µ–¥–µ–Ω–∏–µ —á–∏—Å–ª–æ–≤—ã—Ö –ø–æ–ª–µ–π –∫ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º —Ç–∏–ø–∞–º –¥–∞–Ω–Ω—ã—Ö
   - üìù –û—á–∏—Å—Ç–∫–∞ —Ç–µ–∫—Å—Ç–æ–≤—ã—Ö –ø–æ–ª–µ–π –æ—Ç –ª–∏—à–Ω–∏—Ö –ø—Ä–æ–±–µ–ª–æ–≤
   - üè∑Ô∏è –°—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∞—Ü–∏—è –Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–∏–º–ø–æ—Ä—Ç/—ç–∫—Å–ø–æ—Ä—Ç/–∫–∞–±–æ—Ç–∞–∂)
   - üìã –ó–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –ì–¢–î –∑–Ω–∞—á–µ–Ω–∏–µ–º "–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö"
3. **üåç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Ä—Ç–æ–≤**:
   - üîç –ó–∞–ø—Ä–æ—Å—ã –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
   - üì¶ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ –Ω–æ–º–µ—Ä—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –∏–ª–∏ –∫–æ–Ω–æ—Å–∞–º–µ–Ω—Ç—É
   - üöõ –£—á–µ—Ç —Å–ø–µ—Ü–∏—Ñ–∏–∫–∏ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –ª–∏–Ω–∏–π –ø–µ—Ä–µ–≤–æ–∑–æ–∫
   - ‚ö° –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏
4. **üìä –û–±–æ–≥–∞—â–µ–Ω–∏–µ —Å–ø—Ä–∞–≤–æ—á–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏**:
   - üè¢ –£–Ω–∏—Ñ–∏–∫–∞—Ü–∏—è –Ω–∞–∑–≤–∞–Ω–∏–π –ª–∏–Ω–∏–π —á–µ—Ä–µ–∑ ClickHouse
   - üîÑ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–∞–∑–ª–∏—á–Ω—ã—Ö –≤–∞—Ä–∏–∞–Ω—Ç–æ–≤ –Ω–∞–ø–∏—Å–∞–Ω–∏—è –ª–∏–Ω–∏–π
   - üìã –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –æ —Ñ–∞–π–ª–µ –∏ –≤—Ä–µ–º–µ–Ω–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏
5. **üíæ –≠–∫—Å–ø–æ—Ä—Ç –≤ JSON** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

### üëÅÔ∏è –°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞
- üîç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö Excel —Ñ–∞–π–ª–æ–≤
- ‚è±Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–æ–≤ –Ω–µ –Ω–æ–≤–µ–µ 3 —Å–µ–∫—É–Ω–¥ –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏
- üìù –î–µ—Ç–∞–ª—å–Ω–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ–º –ø—Ä–æ–±–ª–µ–º–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤

## üîß –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–î–ª—è —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è:

```bash
# ClickHouse –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
HOST=clickhouse_host
DATABASE=database_name
USERNAME_DB=username
PASSWORD=password

# –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
IP_ADDRESS_CONSIGNMENTS=service_ip
PORT=service_port

# –ü—É—Ç–∏ –∫ –¥–∞–Ω–Ω—ã–º
XL_IDP_ROOT_VSK_IMPORT=/path/to/vsk/import/data
XL_IDP_PATH_VSK_IMPORT=/path/to/vsk/import/files

# Docker –ø—É—Ç–∏
XL_IDP_PATH_DOCKER=/app/scripts
```

## üõ†Ô∏è –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### üíª –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **üìã –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è:**
```bash
git clone <repository_url>
cd import_vsk_scripts
```

2. **üåê –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∏–ª–∏
venv\Scripts\activate     # Windows
```

3. **üì¶ –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:**
```bash
pip install -r requirements.txt
```

4. **‚öôÔ∏è –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è:**
```bash
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env —Ñ–∞–π–ª —Å –≤–∞—à–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
```

5. **üöÄ –ó–∞–ø—É—Å–∫ –æ–±—Ä–∞–±–æ—Ç–∫–∏:**
```bash
# –†–∞–∑–æ–≤–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ñ–∞–π–ª–∞
python3 scripts/flat_import_vsk.py /path/to/file.xlsx /path/to/output/

# –ó–∞–ø—É—Å–∫ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ (—Ç—Ä–µ–±—É–µ—Ç bash)
bash bash_dir/run_import_vsk.sh
```

### üê≥ Docker Compose (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–±)

–ü—Ä–æ–µ–∫—Ç —è–≤–ª—è–µ—Ç—Å—è —á–∞—Å—Ç—å—é –±–æ–ª—å—à–æ–π —ç–∫–æ—Å–∏—Å—Ç–µ–º—ã –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å–æ–≤ –∏ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ –æ–±—â–∏–π docker-compose —Ñ–∞–π–ª:

```yaml
import_vsk:
  container_name: import_vsk
  restart: always
  ports:
    - "8096:8096"
  volumes:
    - ${XL_IDP_PATH_VSK_IMPORT_SCRIPTS}:${XL_IDP_PATH_DOCKER}
    - ${XL_IDP_ROOT_VSK_IMPORT}:${XL_IDP_PATH_VSK_IMPORT}
  environment:
    XL_IDP_ROOT_VSK_IMPORT: ${XL_IDP_PATH_DOCKER}
    XL_IDP_PATH_VSK_IMPORT: ${XL_IDP_PATH_VSK_IMPORT}
    IP_ADDRESS_CONSIGNMENTS: ${IP_ADDRESS_CONSIGNMENTS}
    XL_VSK_IMPORT: vsk
    TOKEN_TELEGRAM: ${TOKEN_TELEGRAM}
  build:
    context: import_vsk
    dockerfile: ./Dockerfile
    args:
      XL_IDP_PATH_DOCKER: ${XL_IDP_PATH_DOCKER}
  command: bash -c "sh ${XL_IDP_PATH_DOCKER}/bash_dir/run_import_vsk.sh"
  networks:
    - postgres
```

**üìã –ù–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è –≤ .env:**
```bash
# –ü—É—Ç–∏ –∫ —Å–∫—Ä–∏–ø—Ç–∞–º –∏ –¥–∞–Ω–Ω—ã–º
XL_IDP_PATH_VSK_IMPORT_SCRIPTS=/path/to/import_vsk_scripts
XL_IDP_ROOT_VSK_IMPORT=/path/to/vsk/import/data
XL_IDP_PATH_DOCKER=/app/scripts
XL_IDP_PATH_VSK_IMPORT=/app/data

# –ú–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
IP_ADDRESS_CONSIGNMENTS=service_ip
PORT=service_port

# Telegram —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
TOKEN_TELEGRAM=your_bot_token

# ClickHouse –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è)
HOST=clickhouse_host
DATABASE=database_name
USERNAME_DB=username
PASSWORD=password
```

**üöÄ –ó–∞–ø—É—Å–∫:**
```bash
docker-compose up -d import_vsk
```

### üìã –°–∏—Å—Ç–µ–º–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **Python**: 3.8+
- **–û–°**: Linux (–ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ), Windows, macOS
- **–ü–∞–º—è—Ç—å**: –º–∏–Ω–∏–º—É–º 2GB RAM
- **–î–∏—Å–∫**: –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä–µ–º–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –¥–∞–Ω–Ω—ã—Ö
- **–°–µ—Ç—å**: –¥–æ—Å—Ç—É–ø –∫ ClickHouse –∏ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### üì• –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Excel —Ñ–∞–π–ª—ã VSK)
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –∫–æ–ª–æ–Ω–∫–∏:
- **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ì–æ–¥, –ú–µ—Å—è—Ü, –î–∞—Ç–∞ –æ—Ç–≥—Ä—É–∑–∫–∏
- **–õ–æ–≥–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ**: –õ–∏–Ω–∏—è, –ü–æ—Ä—Ç, –¢–µ—Ä–º–∏–Ω–∞–ª, –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ
- **–ö–æ–Ω—Ç–µ–π–Ω–µ—Ä–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ù–æ–º–µ—Ä –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞, –†–∞–∑–º–µ—Ä, –¢–∏–ø, –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ
- **–ì—Ä—É–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ**: –ì—Ä—É–∑, TEU, –í–µ—Å –Ω–µ—Ç—Ç–æ/–±—Ä—É—Ç—Ç–æ, –¢–ù–í–≠–î
- **–£—á–∞—Å—Ç–Ω–∏–∫–∏**: –û—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—å, –ü–æ–ª—É—á–∞—Ç–µ–ª—å, –≠–∫—Å–ø–µ–¥–∏—Ç–æ—Ä, –ê–≥–µ–Ω—Ç
- **–î–æ–∫—É–º–µ–Ω—Ç–æ–æ–±–æ—Ä–æ—Ç**: –ì–¢–î, –ö–æ–Ω–æ—Å–∞–º–µ–Ω—Ç, –†–µ–π—Å
- **–ì–µ–æ–≥—Ä–∞—Ñ–∏—è**: –°—Ç—Ä–∞–Ω–∞ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è, –°—Ç–∞–Ω—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è

### üì§ –í—ã—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- **JSON —Ñ–∞–π–ª—ã** - —Å—Ç–∞–Ω–¥–∞—Ä—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ —Å –∞–Ω–≥–ª–æ—è–∑—ã—á–Ω—ã–º–∏ –ø–æ–ª—è–º–∏
- **–û–±–æ–≥–∞—â–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ**:
  - üåç –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω—ã–µ –ø–æ—Ä—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
  - üöõ –£–Ω–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –ª–∏–Ω–∏–π
  - üìä –§–ª–∞–≥–∏ —É—Å–ø–µ—à–Ω–æ—Å—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ —Ç—Ä–µ–∫–∏–Ω–≥–∞
  - üïí –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–æ–≤

## üîç –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –æ—Ç–ª–∞–¥–∫–∞

### üìú –õ–æ–≥–∏
- –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ ClickHouse
- –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
- –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞
- –û—à–∏–±–∫–∏ –ø–∞—Ä—Å–∏–Ω–≥–∞ –∏ API –∑–∞–ø—Ä–æ—Å–æ–≤

### ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫
- –ü—Ä–æ–±–ª–µ–º–Ω—ã–µ —Ñ–∞–π–ª—ã –ø–µ—Ä–µ–º–µ—â–∞—é—Ç—Å—è —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º "error_"
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –∑–∞–ø—Ä–æ—Å–æ–≤ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É (–¥–æ 3 —Ä–∞–∑)
- –¢–∞–π–º–∞—É—Ç—ã –¥–ª—è –≤–Ω–µ—à–Ω–∏—Ö API –∑–∞–ø—Ä–æ—Å–æ–≤ (120 —Å–µ–∫—É–Ω–¥)
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø—É—Å—Ç—ã—Ö –∏ –ø–æ–≤—Ä–µ–∂–¥–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∑–∞–ø–æ–ª–Ω–µ–Ω–∏–µ –ø—É—Å—Ç—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π –ì–¢–î

## üß™ –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### ‚ûï –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤—ã—Ö —Ç–∏–ø–æ–≤ –æ–±—Ä–∞–±–æ—Ç–∫–∏
1. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π Python –º–æ–¥—É–ª—å –≤ –ø–∞–ø–∫–µ `scripts/`
2. –î–æ–±–∞–≤—å—Ç–µ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â—É—é –ª–æ–≥–∏–∫—É –≤ `flat_import_vsk.sh`
3. –û–±–Ω–æ–≤–∏—Ç–µ –º–∞—Å—Å–∏–≤ `DirsArray` –¥–ª—è –Ω–æ–≤—ã—Ö –ø–∞–ø–æ–∫

### üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
```bash
# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ñ–∞–π–ª–∞
python3 scripts/flat_import_vsk.py test_file.xlsx output/

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ ClickHouse
python3 -c "from scripts.parsed import clickhouse_client; clickhouse_client()"

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
python3 -c "from scripts.parsed import ParsedDf; import pandas as pd; df = pd.DataFrame([{'line': 'SINOKOR', 'container_number': 'TEST123', 'direction': 'import'}]); ParsedDf(df).get_port()"
```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –ø–∞–ø–æ–∫

–°–∏—Å—Ç–µ–º–∞ –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç —Å–ª–µ–¥—É—é—â–∏–µ –ø–∞–ø–∫–∏:
- **flat_import_vsk_tracking** - –æ—Å–Ω–æ–≤–Ω—ã–µ —Ñ–∞–π–ª—ã –∏–º–ø–æ—Ä—Ç–∞ –¥–ª—è —Ç—Ä–µ–∫–∏–Ω–≥–∞
- **flat_import_vsk_tracking_update** - –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –∏–º–ø–æ—Ä—Ç–∞

–ö–∞–∂–¥–∞—è –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç:
- **done/** - —É—Å–ø–µ—à–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã  
- **json/** - —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤ JSON —Ñ–æ—Ä–º–∞—Ç–µ
- **error_*** - —Ñ–∞–π–ª—ã —Å –æ—à–∏–±–∫–∞–º–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

## üîÑ –û—Ç–ª–∏—á–∏—è –æ—Ç —ç–∫—Å–ø–æ—Ä—Ç–∞ VSK

### üîç –°–ø–µ—Ü–∏—Ñ–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö:
- **–ü–æ—Ä—Ç—ã –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è** –≤–º–µ—Å—Ç–æ –ø–æ—Ä—Ç–æ–≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è**: –°—Ç–∞–Ω—Ü–∏—è –£–ö–ü, —Å–±–æ—Ä–Ω—ã–π –≥—Ä—É–∑, —Å—Ç–∞–Ω—Ü–∏—è –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è
- **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –≥–µ–æ–≥—Ä–∞—Ñ–∏—è**: —Å—Ç—Ä–∞–Ω—ã –∫–æ–º–ø–∞–Ω–∏–π –∏ –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω–∏—è
- **–ñ–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω–∞—è –ª–æ–≥–∏—Å—Ç–∏–∫–∞**: —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∏ –£–ö–ü

### üìä –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞:
- –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∏–ø–æ–≤ —É–±—ã—Ç–∏—è –∏ –ø—Ä–∏–±—ã—Ç–∏—è
- –†–∞–±–æ—Ç–∞ —Å –∂–µ–ª–µ–∑–Ω–æ–¥–æ—Ä–æ–∂–Ω—ã–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏
- –°–ø–µ—Ü–∏–∞–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–±–æ—Ä–Ω—ã—Ö –≥—Ä—É–∑–æ–≤
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ä–∞–±–æ—Ç–∞ —Å –∞–≥–µ–Ω—Ç–∞–º–∏ –∏ —ç–∫—Å–ø–µ–¥–∏—Ç–æ—Ä–∞–º–∏

## üÜò –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –ø–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:
1. üìã –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
2. ‚úÖ –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ ClickHouse
3. üåê –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –º–∏–∫—Ä–æ—Å–µ—Ä–≤–∏—Å—É –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ—Ä—Ç–æ–≤
4. üìÅ –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∫ –ø–∞–ø–∫–∞–º —Å –¥–∞–Ω–Ω—ã–º–∏
5. üîç –ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Ñ–∞–π–ª—ã —Å –æ—à–∏–±–∫–∞–º–∏ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
6. üìä –£–±–µ–¥–∏—Ç–µ—Å—å –≤ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å—Ç—Ä—É–∫—Ç—É—Ä—ã Excel —Ñ–∞–π–ª–æ–≤ –∏–º–ø–æ—Ä—Ç–∞

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.